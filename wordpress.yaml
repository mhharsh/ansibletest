- name: Playbook to install docker and run wordpress as container
  become: yes
  hosts: towertest2
  tasks:
    # - apt: 
    #     name: {{ item }} 
    #     state: present 
    #   with_items:
    #     # - python-setuptools
    #     # - python-pip
    #     - docker
    #     - docker.io
    #     # - python-dev 
    #     # - build-essential 

    - apt: name=python-pip state=present 
     
    # - command: easy_install pip

    - pip : name="{{ item.name }}" version="{{ item.version }}"
      with_items:
        - { name: 'docker-compose' , version: '1.7.0'}
        - { name: 'docker-py' , version: '1.20'}
        - { name: 'pyyaml' , version: '3.11'}
      
      
    - docker_service:
        project_src: wordpress
        build: yes
        state: present
      register: output
